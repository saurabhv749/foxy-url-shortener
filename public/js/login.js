function setupLoginForm(){const e=document.getElementById("login-form"),t=document.getElementById("username"),n=document.getElementById("password"),o=document.getElementById("message");let s;e.addEventListener("submit",(async function(e){e.preventDefault();const a=t.value,c=n.value;try{const e=await fetch("/spoof/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:c})});if(e.ok){const{accessToken:t,message:n,success:c}=await e.json();o.innerText=n,o.parentElement.classList.add("visible"),c&&(localStorage.setItem("accessToken",t),localStorage.setItem("username",a)),s&&(clearTimeout(s),s=null),s=setTimeout((()=>{o.parentElement.classList.remove("visible"),c&&(window.location.href="/spoof/dashboard")}),2e3)}}catch(e){console.error("An error occurred:",e)}}))}document.addEventListener("DOMContentLoaded",setupLoginForm);